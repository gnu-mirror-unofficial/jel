<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (14.0.2) on Tue Nov 17 18:26:26 MSK 2020 -->
<title>ClassFile (JEL API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2020-11-17">
<meta name="description" content="declaration: package: gnu.jel, class: ClassFile">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ClassFile.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">gnu.jel</a></div>
<h1 title="Class ClassFile" class="title">Class ClassFile</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance">gnu.jel.ClassFile</div>
</div>
<section class="description">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>java.lang.Cloneable</code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">ClassFile</span>
extends java.lang.Object
implements java.lang.Cloneable</pre>
<div class="block">This class represents a classfile image in JEL.</div>
</section>
<section class="summary">
<ul class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(int,java.lang.String,java.lang.Class,java.lang.Class%5B%5D,gnu.jel.LocalField%5B%5D)">ClassFile</a></span>&#8203;(int&nbsp;modifiers,
java.lang.String&nbsp;name,
java.lang.Class&lt;?&gt;&nbsp;superClass,
java.lang.Class&lt;?&gt;[]&nbsp;interfaces,
<a href="LocalField.html" title="class in gnu.jel">LocalField</a>[]&nbsp;fields)</code></th>
<td class="colLast">
<div class="block">Starts creation of a new class file.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code><a href="ClassFile.html" title="class in gnu.jel">ClassFile</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#clone()">clone</a></span>()</code></th>
<td class="colLast">
<div class="block">Makes a clone of this object.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#code(long)">code</a></span>&#8203;(long&nbsp;op)</code></th>
<td class="colLast">
<div class="block">code up to 8 operations.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#codeB(long)">codeB</a></span>&#8203;(long&nbsp;op)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#codeLDC(java.lang.Object,int)">codeLDC</a></span>&#8203;(java.lang.Object&nbsp;o,
int&nbsp;primitiveID)</code></th>
<td class="colLast">
<div class="block">generates code for code loading constant of primitive type or string.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#codeM(java.lang.reflect.Member)">codeM</a></span>&#8203;(java.lang.reflect.Member&nbsp;m)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getImage()">getImage</a></span>()</code></th>
<td class="colLast">
<div class="block">Finishes class and returns the resulting bytecode.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getIndex(java.lang.Object,int)">getIndex</a></span>&#8203;(java.lang.Object&nbsp;item,
int&nbsp;typeid)</code></th>
<td class="colLast">
<div class="block">Used to determine an old CP index or to create a new one for an item.</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#newMethod(gnu.jel.LocalMethod,java.lang.Class%5B%5D)">newMethod</a></span>&#8203;(<a href="LocalMethod.html" title="class in gnu.jel">LocalMethod</a>&nbsp;m,
java.lang.Class&lt;?&gt;[]&nbsp;vars)</code></th>
<td class="colLast">
<div class="block">Starts a new method of this class.</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#noteStk(int,int)">noteStk</a></span>&#8203;(int&nbsp;s,
int&nbsp;a)</code></th>
<td class="colLast">
<div class="block">Notes removal of typeID s and subsequent addition of typeID a
 to Java stack.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(int,java.lang.String,java.lang.Class,java.lang.Class[],gnu.jel.LocalField[])">ClassFile</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">ClassFile</span>&#8203;(<span class="arguments">int&nbsp;modifiers,
java.lang.String&nbsp;name,
java.lang.Class&lt;?&gt;&nbsp;superClass,
java.lang.Class&lt;?&gt;[]&nbsp;interfaces,
<a href="LocalField.html" title="class in gnu.jel">LocalField</a>[]&nbsp;fields)</span></div>
<div class="block">Starts creation of a new class file.
 <P>Sizes of <TT>fAccess</TT>, <TT>fNames</TT> and <TT>fTypes</TT>
 arrays must be the same.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>modifiers</code> - sum of one or more of <TT>PUBLIC</TT>, <TT>FINAL</TT>,
                  <TT>INTERFACE</TT>, <TT>ABSTRACT</TT>
                  constants of java.lang.reflect.Modifier</dd>
<dd><code>name</code> - is the name of new class (must be in Java historical form,
             i.e. with dots replaced by slashes '/')</dd>
<dd><code>superClass</code> - is the superclass of this class</dd>
<dd><code>interfaces</code> - array of interfaces this class implements</dd>
<dd><code>fields</code> - fields this class will have</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="clone()">clone</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="ClassFile.html" title="class in gnu.jel">ClassFile</a></span>&nbsp;<span class="memberName">clone</span>()</div>
<div class="block">Makes a clone of this object.
 <P> This is used in JEL to avoid step-by step creation of service
 methods of gnu.jel.CompiledExpression (<init>, getType, ...). They are
 created only once, and then the resulting ClassFile is cloned
 at the point, when it is ready to accept the code for evaluation method.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>clone</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a clone of this object</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="newMethod(gnu.jel.LocalMethod,java.lang.Class[])">newMethod</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">newMethod</span>&#8203;(<span class="arguments"><a href="LocalMethod.html" title="class in gnu.jel">LocalMethod</a>&nbsp;m,
java.lang.Class&lt;?&gt;[]&nbsp;vars)</span></div>
<div class="block">Starts a new method of this class.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>m</code> - method descriptor.</dd>
<dd><code>vars</code> - types of local variables by number.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getImage()">getImage</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">byte[]</span>&nbsp;<span class="memberName">getImage</span>()</div>
<div class="block">Finishes class and returns the resulting bytecode.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>array of bytes of the resulting *.class file.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="noteStk(int,int)">noteStk</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">noteStk</span>&#8203;(<span class="arguments">int&nbsp;s,
int&nbsp;a)</span></div>
<div class="block">Notes removal of typeID s and subsequent addition of typeID a
 to Java stack.
 <P> If either is negative the corresponding operation
 (addition/removal) is skipped. This method is needed to allow ClassFile
 to compute the maximum stack occupation for the generated code. It is
 responsibility of the user (of this class) to call noteStk() each
 time the stack is changed from within the code.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>s</code> - typeid to be put on stack (-1 if none).</dd>
<dd><code>a</code> - typeid to be taken off Java stack (-1 if none).</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="codeB(long)">codeB</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">codeB</span>&#8203;(<span class="arguments">long&nbsp;op)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="codeM(java.lang.reflect.Member)">codeM</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">codeM</span>&#8203;(<span class="arguments">java.lang.reflect.Member&nbsp;m)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="code(long)">code</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">code</span>&#8203;(<span class="arguments">long&nbsp;op)</span></div>
<div class="block">code up to 8 operations.
 <P>Additionally to Java bytecodes this method accepts (and interprets)
 some more commands. See the implementation.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>op</code> - operations to code (least significant bytes coded first).</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="codeLDC(java.lang.Object,int)">codeLDC</a></h3>
<div class="memberSignature"><span class="modifiers">public final</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">codeLDC</span>&#8203;(<span class="arguments">java.lang.Object&nbsp;o,
int&nbsp;primitiveID)</span></div>
<div class="block">generates code for code loading constant of primitive type or string.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>o</code> - reflection object or String containing the constant</dd>
<dd><code>primitiveID</code> - type ID to save lookups.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getIndex(java.lang.Object,int)">getIndex</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getIndex</span>&#8203;(<span class="arguments">java.lang.Object&nbsp;item,
int&nbsp;typeid)</span></div>
<div class="block">Used to determine an old CP index or to create a new one for an item.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>item</code> - an item to create or get an index for</dd>
<dd><code>typeid</code> - identifies type of argument to avoid linear searches</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>index for an item (negative if it has to be written)</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ClassFile.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small><p><i>Copyright &#169; 1998-2020 Konstantin L. Metlov All Rights Reserved.</i></p><p>Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts. A copy of the license is included in the JEL manual.</p></small></p>
</footer>
</div>
</div>
</body>
</html>
